[gd_scene load_steps=15 format=3 uid="uid://rd5dpiraw5pc"]

[ext_resource type="Texture2D" uid="uid://chwbcf7n2ajtp" path="res://art/platforms/Platformer_spritesheet.png" id="1_fp2yv"]
[ext_resource type="Script" path="res://levels/level.gd" id="1_gprv2"]
[ext_resource type="Texture2D" uid="uid://bja0wl8tcw71c" path="res://art/backgrounds/background_01.png" id="2_3u7pw"]
[ext_resource type="PackedScene" uid="uid://l77yyrbxqn53" path="res://player/elf/elf.tscn" id="2_fi0vq"]
[ext_resource type="Texture2D" uid="uid://bujx43rcy5b85" path="res://art/backgrounds/background_02.png" id="3_7neob"]
[ext_resource type="PackedScene" uid="uid://dsrdck8a6i6vs" path="res://player/knight/knight.tscn" id="3_rxuav"]
[ext_resource type="PackedScene" uid="uid://ci6dkiwxoscgd" path="res://interactables/pressure_plate/pressure_plate.tscn" id="6_efjtw"]
[ext_resource type="PackedScene" uid="uid://yvx15mx06m2a" path="res://interactables/pushable_objects/pushable_crate.tscn" id="6_gty8n"]
[ext_resource type="PackedScene" uid="uid://drjsary1k0tl2" path="res://interactables/door/door.tscn" id="7_66gux"]
[ext_resource type="PackedScene" uid="uid://dfa35xojw8t18" path="res://interactables/chest/chest.tscn" id="8_6bdtq"]
[ext_resource type="PackedScene" uid="uid://b1m4826xpl5mi" path="res://interactables/key_door/key_door.tscn" id="9_qgh4e"]
[ext_resource type="PackedScene" uid="uid://bu7yt0b0klmc4" path="res://interactables/bridge/bridge.tscn" id="10_kn4di"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_6hyw6"]
texture = ExtResource("1_fp2yv")
texture_region_size = Vector2i(128, 128)
0:0/0 = 0
0:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
0:0/0/physics_layer_0/angular_velocity = 0.0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(64, -64, 64, 64, -64, 64)
1:0/0 = 0
1:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
1:0/0/physics_layer_0/angular_velocity = 0.0
1:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)
2:0/0 = 0
2:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
2:0/0/physics_layer_0/angular_velocity = 0.0
2:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, 64, -64, 64)
3:0/0 = 0
3:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
3:0/0/physics_layer_0/angular_velocity = 0.0
3:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -19.9561, 64, -64, 3.20723)
0:1/0 = 0
0:1/0/physics_layer_0/linear_velocity = Vector2(0, 0)
0:1/0/physics_layer_0/angular_velocity = 0.0
0:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)
1:1/0 = 0
1:1/0/physics_layer_0/linear_velocity = Vector2(0, 0)
1:1/0/physics_layer_0/angular_velocity = 0.0
1:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)
2:1/0 = 0
2:1/0/physics_layer_0/linear_velocity = Vector2(0, 0)
2:1/0/physics_layer_0/angular_velocity = 0.0
2:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)
3:1/0 = 0
3:1/0/physics_layer_0/linear_velocity = Vector2(0, 0)
3:1/0/physics_layer_0/angular_velocity = 0.0
3:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, -0.356361, 17.818, 64, -64, 64)
0:2/0 = 0
0:2/0/physics_layer_0/linear_velocity = Vector2(0, 0)
0:2/0/physics_layer_0/angular_velocity = 0.0
0:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-34.2105, -64, 64, -64, 64, 64, -34.2105, 64)
1:2/0 = 0
1:2/0/physics_layer_0/linear_velocity = Vector2(0, 0)
1:2/0/physics_layer_0/angular_velocity = 0.0
1:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)
2:2/0 = 0
2:2/0/physics_layer_0/linear_velocity = Vector2(0, 0)
2:2/0/physics_layer_0/angular_velocity = 0.0
2:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)
3:2/0 = 0
3:2/0/physics_layer_0/linear_velocity = Vector2(0, 0)
3:2/0/physics_layer_0/angular_velocity = 0.0
3:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)
0:3/0 = 0
0:3/0/physics_layer_0/linear_velocity = Vector2(0, 0)
0:3/0/physics_layer_0/angular_velocity = 0.0
0:3/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 31.3596, -64, 32.0723, 64, -64, 64)

[sub_resource type="TileSet" id="TileSet_1sbu5"]
tile_size = Vector2i(128, 128)
physics_layer_0/collision_layer = 1
physics_layer_0/collision_mask = 0
sources/1 = SubResource("TileSetAtlasSource_6hyw6")

[node name="Level_01" type="Node2D" node_paths=PackedStringArray("players_container", "spawn_points", "key_door")]
script = ExtResource("1_gprv2")
player_scenes = Array[PackedScene]([ExtResource("2_fi0vq"), ExtResource("3_rxuav")])
players_container = NodePath("----- Players -----/PlayersContainer")
spawn_points = [NodePath("----- Players -----/SpawnPoint_0"), NodePath("----- Players -----/SpawnPoint_1")]
key_door = NodePath("----- Interactables -----/KeyDoor")

[node name="----- Environment -----" type="Node" parent="."]

[node name="TileMap" type="TileMap" parent="----- Environment -----"]
scale = Vector2(0.5, 0.5)
tile_set = SubResource("TileSet_1sbu5")
format = 2
layer_0/tile_data = PackedInt32Array(131072, 131073, 2, 131073, 131073, 2, 131074, 131073, 2, 131075, 131073, 2, 131076, 131073, 2, 131077, 131073, 2, 131079, 131073, 2, 131080, 131073, 2, 65544, 1, 2, -65528, 1, 2, 8, 1, 2, 131078, 131073, 2, -131064, 196609, 0, -131063, 65537, 0, -131062, 65537, 0, -131061, 65537, 0, -131060, 65537, 0, -65527, 65537, 1, 9, 65537, 1, 65545, 65537, 1, -65526, 65537, 1, 10, 65537, 1, 65546, 65537, 1, -65525, 65537, 1, 11, 65537, 1, 65547, 65537, 1, -65524, 65537, 1, 12, 65537, 1, 65548, 65537, 1, 131081, 131073, 2, 131082, 131073, 2, 131083, 131073, 2, 131084, 131073, 2, 131085, 131073, 2, 131086, 131073, 2, 131087, 131073, 2, 131088, 131073, 2, 131089, 131073, 2, 131090, 131073, 2, 131091, 131073, 2, 131092, 131073, 2, 131093, 131073, 2, 196607, 131073, 2, 196606, 131073, 2, 196605, 131073, 2, 196604, 131073, 2, 196603, 131073, 2, 196602, 131073, 2, 196601, 131073, 2, 196600, 131073, 2, 196599, 131073, 2, 196598, 131073, 2, 196597, 131073, 2, 196596, 131073, 2, 196595, 131073, 2, 196594, 131073, 2, 196593, 131073, 2, 196592, 131073, 2, 131056, 1, 3, 65520, 1, 3, -16, 131073, 1, -65552, 1, 3, -131088, 1, 3, -196624, 1, 3, -262160, 1, 3, -327696, 1, 3, -393232, 1, 3, -458768, 1, 3, -524304, 65537, 1, -524303, 65537, 1, -524302, 65537, 1, -524301, 65537, 1, -524300, 65537, 1, -524299, 65537, 1, -524298, 65537, 1, -524297, 65537, 1, -524296, 65537, 1, -524295, 65537, 1, -524294, 65537, 1, -524293, 65537, 1, -524292, 65537, 1, -524291, 65537, 1, -524290, 65537, 1, -524289, 65537, 1, -589824, 65537, 1, -589823, 65537, 1, -589822, 65537, 1, -589821, 65537, 1, -589820, 65537, 1, -589819, 65537, 1, -589818, 65537, 1, -589817, 65537, 1, -589816, 65537, 1, -589815, 65537, 1, -589814, 65537, 1, -589813, 65537, 1, -589812, 65537, 1, -589811, 65537, 1, -589810, 65537, 1, -589809, 65537, 1, -589808, 65537, 1, -589807, 65537, 1, -589806, 65537, 1, -589805, 65537, 1, -589804, 65537, 1, -589803, 65537, 1, -589802, 65537, 1, -589801, 65537, 1, 131094, 131073, 2, 131095, 131073, 2, 131096, 131073, 2, 131097, 131073, 2, 131098, 131073, 2, 131099, 131073, 2, 131100, 131073, 2, 131101, 131073, 2, 131102, 131073, 2, 131103, 131073, 2, 131104, 131073, 2, 131105, 131073, 2, 65569, 1, 2, 33, 1, 2, -65503, 1, 2, -131039, 1, 2, -196575, 1, 1, -262111, 1, 2, -327647, 1, 2, -393183, 1, 2, -458719, 1, 2, -524255, 1, 2, -589800, 65537, 1, -589799, 65537, 1, -589798, 65537, 1, -589797, 65537, 1, -589796, 65537, 1, -589795, 65537, 1, -589794, 65537, 1, -589793, 65537, 1, -589792, 65537, 1, -589791, 65537, 1, -589790, 65537, 1, -524254, 65537, 1, -458718, 65537, 1, -393182, 65537, 1, -327646, 65537, 1, -262110, 65537, 1, -196574, 65537, 1, -131038, 65537, 1, -65502, 65537, 1, 34, 65537, 1, 65570, 65537, 1, -589789, 65537, 1, -524253, 65537, 1, -458717, 65537, 1, -393181, 65537, 1, -327645, 65537, 1, -262109, 65537, 1, -196573, 65537, 1, -131037, 65537, 1, -65501, 65537, 1, 35, 65537, 1, 65571, 65537, 1, -589788, 65537, 1, -524252, 65537, 1, -458716, 65537, 1, -393180, 65537, 1, -327644, 65537, 1, -262108, 65537, 1, -196572, 65537, 1, -131036, 65537, 1, -65500, 65537, 1, 36, 65537, 1, 65572, 65537, 1, -589787, 65537, 1, -524251, 65537, 1, -458715, 65537, 1, -393179, 65537, 1, -327643, 65537, 1, -262107, 65537, 1, -196571, 65537, 1, -131035, 65537, 1, -65499, 65537, 1, 37, 65537, 1, 65573, 65537, 1, -589786, 65537, 1, -524250, 65537, 1, -458714, 65537, 1, -393178, 65537, 1, -327642, 65537, 1, -262106, 65537, 1, -196570, 65537, 1, -131034, 65537, 1, -65498, 65537, 1, 38, 65537, 1, 65574, 65537, 1, -589785, 65537, 1, -524249, 65537, 1, -458713, 65537, 1, -393177, 65537, 1, -327641, 65537, 1, -262105, 65537, 1, -196569, 65537, 1, -131033, 65537, 1, -65497, 65537, 1, 39, 65537, 1, 65575, 65537, 1, -589784, 65537, 1, -524248, 65537, 1, -458712, 65537, 1, -393176, 65537, 1, -327640, 65537, 1, -262104, 65537, 1, -196568, 65537, 1, -131032, 65537, 1, -65496, 65537, 1, 40, 65537, 1, 65576, 65537, 1, -589783, 65537, 1, -524247, 65537, 1, -458711, 65537, 1, -393175, 65537, 1, -327639, 65537, 1, -262103, 65537, 1, -196567, 65537, 1, -131031, 65537, 1, -65495, 65537, 1, 41, 65537, 1, 65577, 65537, 1, -589782, 65537, 1, -524246, 65537, 1, -458710, 65537, 1, -393174, 65537, 1, -327638, 65537, 1, -262102, 65537, 1, -196566, 65537, 1, -131030, 65537, 1, -65494, 65537, 1, 42, 65537, 1, 65578, 65537, 1, -589781, 65537, 1, -524245, 65537, 1, -458709, 65537, 1, -393173, 65537, 1, -327637, 65537, 1, -262101, 65537, 1, -196565, 65537, 1, -131029, 65537, 1, -65493, 65537, 1, 43, 65537, 1, 65579, 65537, 1, -589780, 65537, 1, -524244, 65537, 1, -458708, 65537, 1, -393172, 65537, 1, -327636, 65537, 1, -262100, 65537, 1, -196564, 65537, 1, -131028, 65537, 1, -65492, 65537, 1, 44, 65537, 1, 65580, 65537, 1, -589779, 65537, 1, -524243, 65537, 1, -458707, 65537, 1, -393171, 65537, 1, -327635, 65537, 1, -262099, 65537, 1, -196563, 65537, 1, -131027, 65537, 1, -65491, 65537, 1, 45, 65537, 1, 65581, 65537, 1, -589778, 65537, 1, -524242, 65537, 1, -458706, 65537, 1, -393170, 65537, 1, -327634, 65537, 1, -262098, 65537, 1, -196562, 65537, 1, -131026, 65537, 1, -65490, 65537, 1, 46, 65537, 1, 65582, 65537, 1, 131106, 131073, 2, 131107, 131073, 2, 131108, 131073, 2, 131109, 131073, 2, 131110, 131073, 2, 131111, 131073, 2, 131112, 131073, 2, 131113, 131073, 2, 131114, 131073, 2, 131115, 131073, 2, 131116, 131073, 2, 131117, 131073, 2, 131118, 131073, 2, 196582, 131073, 2, 196583, 131073, 2, 196584, 131073, 2, 196585, 131073, 2, 196586, 131073, 2, 196587, 131073, 2, 196588, 131073, 2, 196589, 131073, 2, 196590, 131073, 2, 196591, 131073, 2, -524314, 65537, 1, -458778, 65537, 1, -393242, 65537, 1, -327706, 65537, 1, -262170, 65537, 1, -196634, 65537, 1, -131098, 65537, 1, -65562, 65537, 1, -26, 65537, 1, 65510, 65537, 1, 131046, 65537, 1, -524313, 65537, 1, -458777, 65537, 1, -393241, 65537, 1, -327705, 65537, 1, -262169, 65537, 1, -196633, 65537, 1, -131097, 65537, 1, -65561, 65537, 1, -25, 65537, 1, 65511, 65537, 1, 131047, 65537, 1, -524312, 65537, 1, -458776, 65537, 1, -393240, 65537, 1, -327704, 65537, 1, -262168, 65537, 1, -196632, 65537, 1, -131096, 65537, 1, -65560, 65537, 1, -24, 65537, 1, 65512, 65537, 1, 131048, 65537, 1, -524311, 65537, 1, -458775, 65537, 1, -393239, 65537, 1, -327703, 65537, 1, -262167, 65537, 1, -196631, 65537, 1, -131095, 65537, 1, -65559, 65537, 1, -23, 65537, 1, 65513, 65537, 1, 131049, 65537, 1, -524310, 65537, 1, -458774, 65537, 1, -393238, 65537, 1, -327702, 65537, 1, -262166, 65537, 1, -196630, 65537, 1, -131094, 65537, 1, -65558, 65537, 1, -22, 65537, 1, 65514, 65537, 1, 131050, 65537, 1, -524309, 65537, 1, -458773, 65537, 1, -393237, 65537, 1, -327701, 65537, 1, -262165, 65537, 1, -196629, 65537, 1, -131093, 65537, 1, -65557, 65537, 1, -21, 65537, 1, 65515, 65537, 1, 131051, 65537, 1, -524308, 65537, 1, -458772, 65537, 1, -393236, 65537, 1, -327700, 65537, 1, -262164, 65537, 1, -196628, 65537, 1, -131092, 65537, 1, -65556, 65537, 1, -20, 65537, 1, 65516, 65537, 1, 131052, 65537, 1, -524307, 65537, 1, -458771, 65537, 1, -393235, 65537, 1, -327699, 65537, 1, -262163, 65537, 1, -196627, 65537, 1, -131091, 65537, 1, -65555, 65537, 1, -19, 65537, 1, 65517, 65537, 1, 131053, 65537, 1, -524306, 65537, 1, -458770, 65537, 1, -393234, 65537, 1, -327698, 65537, 1, -262162, 65537, 1, -196626, 65537, 1, -131090, 65537, 1, -65554, 65537, 1, -18, 65537, 1, 65518, 65537, 1, 131054, 65537, 1, -524305, 65537, 1, -458769, 65537, 1, -393233, 65537, 1, -327697, 65537, 1, -262161, 65537, 1, -196625, 65537, 1, -131089, 65537, 1, -65553, 65537, 1, -17, 65537, 1, 65519, 65537, 1, 131055, 65537, 1, -131059, 131073, 0, -65522, 131073, 0, 15, 131073, 0, 65552, 131073, 0, -65523, 131073, 1, 14, 131073, 1, 65551, 131073, 1, 13, 65537, 1, 65549, 65537, 1, 65550, 65537, 1, -15, 65537, 0, -14, 65537, 0, -13, 65537, 0, -12, 65537, 0, -11, 65537, 0, -10, 131073, 0, -196576, 65537, 0, -196577, 65537, 0, -196578, 65537, 0, -196579, 196609, 0, -196591, 196609, 0, -196590, 65537, 0, -196589, 65537, 0, -196588, 196609, 1)

[node name="ParallaxBackground" type="ParallaxBackground" parent="----- Environment -----"]
offset = Vector2(0, -560)
transform = Transform2D(1, 0, 0, 1, 0, -560)

[node name="ParallaxTrees" type="ParallaxLayer" parent="----- Environment -----/ParallaxBackground"]
motion_scale = Vector2(0.25, 1)
motion_mirroring = Vector2(1334, 0)

[node name="BackgroundTrees" type="Sprite2D" parent="----- Environment -----/ParallaxBackground/ParallaxTrees"]
texture = ExtResource("2_3u7pw")
centered = false

[node name="ParallaxHouses" type="ParallaxLayer" parent="----- Environment -----/ParallaxBackground"]
motion_scale = Vector2(0.5, 1)
motion_mirroring = Vector2(1334, 0)

[node name="BackgroundHouses" type="Sprite2D" parent="----- Environment -----/ParallaxBackground/ParallaxHouses"]
texture = ExtResource("3_7neob")
centered = false

[node name="----- Interactables -----" type="Node" parent="."]

[node name="PushableCrate" parent="----- Interactables -----" instance=ExtResource("6_gty8n")]
position = Vector2(638, -164)

[node name="DoorPlate" parent="----- Interactables -----" instance=ExtResource("6_efjtw")]
position = Vector2(-930, -68)

[node name="Door" parent="----- Interactables -----" instance=ExtResource("7_66gux")]
position = Vector2(-580, 128)

[node name="Chest" parent="----- Interactables -----" instance=ExtResource("8_6bdtq")]
position = Vector2(-941, 130)
scale = Vector2(-1, 1)

[node name="KeyDoor" parent="----- Interactables -----" instance=ExtResource("9_qgh4e")]
position = Vector2(301, 130)

[node name="BridgePlate1" parent="----- Interactables -----" instance=ExtResource("6_efjtw")]
position = Vector2(1142, -195)

[node name="BridgePlate2" parent="----- Interactables -----" instance=ExtResource("6_efjtw")]
position = Vector2(1289, -196)

[node name="Bridge" parent="----- Interactables -----" instance=ExtResource("10_kn4di")]
position = Vector2(1600, -158)

[node name="----- Players -----" type="Node" parent="."]

[node name="PlayersContainer" type="Node2D" parent="----- Players -----"]

[node name="PlayerSpawner" type="MultiplayerSpawner" parent="----- Players -----"]
_spawnable_scenes = PackedStringArray("res://player/elf/elf.tscn", "res://player/knight/knight.tscn")
spawn_path = NodePath("../PlayersContainer")
spawn_limit = 2

[node name="SpawnPoint_0" type="Node2D" parent="----- Players -----"]
position = Vector2(83, 123)

[node name="SpawnPoint_1" type="Node2D" parent="----- Players -----"]
position = Vector2(229, 123)

[connection signal="toggle" from="----- Interactables -----/DoorPlate" to="----- Interactables -----/Door" method="activate"]
[connection signal="toggle" from="----- Interactables -----/BridgePlate1" to="----- Interactables -----/Bridge" method="activate"]
[connection signal="toggle" from="----- Interactables -----/BridgePlate2" to="----- Interactables -----/Bridge" method="activate"]
